<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<meta property="og:url" content="http://f8-app-tutorial-cn.liaohuqiu.net/tutorials/building-the-f8-app/local-setup/" />
	<meta property="og:site_name" content="Facebook React Native 教程"/>
	<meta property="og:title" content="Facebook React Native 教程" />
	<meta property="og:image" content="http://f8-app-tutorial-cn.liaohuqiu.net/static/og_image.png" />
	<meta property="og:description" content="Facebook 2016 年 F8 app 的中文教程。React Native 的官方最佳实践，应该是最好的 React Native 学习资料了。从服务器端到 App，包括 Redux，Relay，GraphQL。教程涵盖：如何进行 app 技术选型，如何做跨平台设计，如何做 React Native 的测试。
" />
  <link rel="stylesheet" type="text/css" media="screen" href="/css/main.css">
  <link rel="stylesheet" type="text/css" media="screen" href="//cdn.jsdelivr.net/font-hack/2.019/css/hack.min.css">

  <link rel="icon" href="static/favicon_junction.png" type="image/x-icon">

  <base href="/" />

  <script src="https://fb.me/react-with-addons-0.13.1.min.js"></script>

  <title>本地设置运行 App &mdash; Facebook React Native 教程</title>
  <meta name="description" content="  这一系列的教程写于 F8 2016 app 开发期间，为的是用简单的文字来介绍 React Native 及其开源生态。教程于 2016 年 4 月 13 号发布到 makeitopen.com，内容翔实很有指导意义，我 看了之后花了周六日两天时间，翻译成中文，方便大家学习。">

  <link rel="canonical" href="http://f8-app-tutorial-cn.liaohuqiu.net/tutorials/building-the-f8-app/local-setup/">
  <link rel="alternate" type="application/rss+xml" title="Facebook React Native 教程" href="http://f8-app-tutorial-cn.liaohuqiu.net/feed/" />
</head>

  <body>
    <div id="fixed_header" class="fixedHeaderContainer visible">
  <header>
    <a href="/">
      <img src="/static/logo_square_small.png">
      <h2>构建 F8 App / React Native 开发指南</h2>
    </a>

    <div class="navigationWrapper navigationFull" id="flat_nav">
      <nav class="navigation">
        <ul>
          
        </ul>
      </nav>
    </div>
  </header>
</div>

    <div class="navPusher">
      
<div class="mainContainer blogContainer postContainer">
  <div id="main_wrap" class="wrapper mainWrapper">
    
<div class="post">
  <header class="post-header">
    <h2 class="postSubtitle">
      <span>构建 F8 2016 App: 附录 1</span>
      本地设置运行 App
    </h2>
    <div class="postPlugins">
      <div class="pluginBlock">
        <a href="https://twitter.com/share" class="twitter-share-button" data-hashtags="本地设置运行App">Tweet</a>
      </div>
      <div class="fb-like" data-layout="button_count" data-action="like" data-show-faces="true" data-share="true"></div>
    </div>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
    <script>
      window.fbAsyncInit = function() {
      FB.init({
        appId      : '',
        xfbml      : true,
        version    : 'v2.3'
      });
      };

      (function(d, s, id){
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) {return;}
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/sdk.js";
      fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));
    </script>
  </header>

  <article class="post-content">
   
      <blockquote>
  <p><em>这一系列的教程写于 F8 2016 app 开发期间，为的是用简单的文字来介绍 React Native 及其开源生态。教程于 2016 年 4 月 13 号发布到 makeitopen.com，内容翔实很有指导意义，<a href="https://github.com/liaohuqiu">我</a> 看了之后花了周六日两天时间，翻译成中文，方便大家学习。</em></p>
</blockquote>

<p>你可以从 <a href="https://itunes.apple.com/us/app/f8/id853467066">iOS App Store</a>, 或者从 <a href="https://play.google.com/store/apps/details?id=com.facebook.f8">Google Play Store</a> 下载安装 F8。</p>

<p>如果你在阅读本教程时，你想在本地运行 App，你可根据以下简要的步骤进行设置：</p>

<p>如果你是在 Windows 或者 Linux 上进行设置，请参考这个 React Native Android 版本在 Windows 和 Linux 上的 <a href="http://facebook.github.io/react-native/docs/linux-windows-support.html#content">相关支持</a>。</p>

<blockquote>
  <p>如果还没配置过 React Native 的，可以看看这个 <a href="http://www.liaohuqiu.net/cn/posts/react-native-1/">React Native 配置和起步</a>。</p>
</blockquote>

<h3 id="section">需求</h3>

<p>开始之前，请需要安装这些前置依赖:</p>

<ol>
  <li><a href="http://facebook.github.io/react-native/docs/getting-started.html">React Native</a></li>
  <li><a href="http://cocoapods.org">CocoaPods</a> 1.0+ (只有 iOS 需要)</li>
  <li><a href="https://www.mongodb.org/downloads">MongoDB</a> (本地运行 Parse Server 需要)</li>
</ol>

<h3 id="section-1">配置</h3>

<h4 id="clone-">1. <strong>Clone 项目</strong></h4>

<div class="highlighter-rouge"><div class="rougeHighlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre>$ git clone https://github.com/fbsamples/f8app.git
$ cd f8app
</pre></td></tr></tbody></table>
</div>
</div>

<h4 id="npm-v3">2. <strong>安装依赖</strong> (npm v3+):</h4>

<div class="highlighter-rouge"><div class="rougeHighlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre>$ npm install
$ (cd ios; pod install)        # 只有 ios 需要
</pre></td></tr></tbody></table>
</div>
</div>

<h4 id="mongodb-">3. <strong>确认 MongoDB 是已经运行的:</strong></h4>

<div class="highlighter-rouge"><div class="rougeHighlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>$ lsof -iTCP:27017 -sTCP:LISTEN
</pre></td></tr></tbody></table>
</div>
</div>

<p>如果你要使用外部的 MongoDB，请设置 <code class="highlighter-rouge">DATABASE_URI</code></p>

<div class="highlighter-rouge"><div class="rougeHighlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>$ export DATABASE_URI=mongodb://example-mongo-hosting.com:1337/my-awesome-database
</pre></td></tr></tbody></table>
</div>
</div>

<h4 id="parsegraphql">4. <strong>启动 Parse/GraphQL:</strong></h4>

<div class="highlighter-rouge"><div class="rougeHighlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>$ npm start
</pre></td></tr></tbody></table>
</div>
</div>

<h4 id="parse-server-">5. <strong>导入示例数据</strong> (本地的 Parse Server 应该已经在运行了):</h4>

<div class="highlighter-rouge"><div class="rougeHighlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>$ npm run import-data
</pre></td></tr></tbody></table>
</div>
</div>

<p>打开这些链接，确保一切正常：</p>

<ul>
  <li>
    <p>Parse Dashboard: <a href="http://localhost:8080/dashboard">http://localhost:8080/dashboard</a></p>
  </li>
  <li>
    <p>Graph<em>i</em>QL: <a href="http://localhost:8080/graphql?query=query+%7B%0A++schedule+%7B%0A++++title%0A++++speakers+%7B%0A++++++name%0A++++++title%0A++++%7D%0A++++location+%7B%0A++++++name%0A++++%7D%0A++%7D%0A%7D">http://localhost:8080/graphql</a></p>
  </li>
</ul>

<p><img src="static/images/screenshot-server@2x.png" /></p>

<h4 id="android">6. <strong>运行 Android</strong>:</h4>

<div class="highlighter-rouge"><div class="rougeHighlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre>$ react-native run-android
$ adb reverse tcp:8081 tcp:8081   # 使用 adb 端口代理，确保设备可以访问 Packager 和 GraphQL server
$ adb reverse tcp:8080 tcp:8080
</pre></td></tr></tbody></table>
</div>
</div>

<h4 id="ios">7. <strong>运行 iOS:</strong></h4>

<div class="highlighter-rouge"><div class="rougeHighlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>$ react-native run-ios
</pre></td></tr></tbody></table>
</div>
</div>

    
  </article>
  








<div class="postPagination">

<div class="pagingLink previousLink">
  <a href="/tutorials/building-the-f8-app/testing/">
    <i>&lsaquo;</i>
    <span>测试</span>
  </a>
</div>



<div class="pagingLink nextLink">
  <a href="/tutorials/building-the-f8-app/relay/">
    <span>使用 Relay 和 GraphQL</span>
    <i>&rsaquo;</i>
  </a>
</div>

</div>




</div>

    <div>
</div>
<nav class='toc' id="doc_nav"></nav>
<script>
  
  var docnavData = [
    {
      group     : "构建 F8 2016 App",
      items     : [
        
        
        {
          key : "/tutorials/building-the-f8-app/planning/",
          title : "App 的筹备",
          type: "",
          partlabel : "第一章",
          url : "/tutorials/building-the-f8-app/planning/",
        },
        
        
        {
          key : "/tutorials/building-the-f8-app/design/",
          title : "应用的多平台设计",
          type: "",
          partlabel : "第二章",
          url : "/tutorials/building-the-f8-app/design/",
        },
        
        
        {
          key : "/tutorials/building-the-f8-app/data/",
          title : "数据集成",
          type: "",
          partlabel : "第三章",
          url : "/tutorials/building-the-f8-app/data/",
        },
        
        
        {
          key : "/tutorials/building-the-f8-app/testing/",
          title : "测试",
          type: "",
          partlabel : "第四章",
          url : "/tutorials/building-the-f8-app/testing/",
        },
        
        
        {
          key : "/tutorials/building-the-f8-app/local-setup/",
          title : "本地设置运行 App",
          type: "appendix",
          partlabel : "附录 1",
          url : "/tutorials/building-the-f8-app/local-setup/",
        },
        
        
        {
          key : "/tutorials/building-the-f8-app/relay/",
          title : "使用 Relay 和 GraphQL",
          type: "appendix",
          partlabel : "附录 2",
          url : "/tutorials/building-the-f8-app/relay/",
        },
        
        
        {
          key : "/tutorials/building-the-f8-app/windows/",
          title : "移植 F8 App 到 Windows",
          type: "appendix",
          partlabel : "附录 3",
          url : "/tutorials/building-the-f8-app/windows/",
        }
        
      ],
    },
  ];
</script>
<script type="text/javascript">
  var DocNav = React.createClass({displayName: "DocNav",
    getInitialState: function() {
      return {
        toggleActive: false,
      };
    },
    getDefaultProps: function() {
      return {
        currentDoc: "本地设置运行 App",
        currentGroup: "构建 F8 2016 App",
        data: docnavData,
      }
    },
    handleSlide: function(id) {
      this.setState({
        toggleActive: !this.state.toggleActive,
      });
    },
    render: function() {
      var classes = React.addons.classSet({
        'navToggle': true,
        'navToggleActive': this.state.toggleActive,
      });
      var navClasses = React.addons.classSet({
        'toggleNav': true,
        'toggleNavActive': this.state.toggleActive,
      });
      return (
        React.createElement("div", {className: navClasses},
          React.createElement("section", null,
            this.props.data.map(this.renderNavGroups)
          ),
          React.createElement("div", {className: classes, onClick: this.handleSlide},
            React.createElement("span", null, "目录"), React.createElement("i", null, String.fromCharCode(43))
          )
        )
      );
    },
    renderNavGroups: function(child, index) {
      var classes = React.addons.classSet({
        'navGroup': true,
        'navGroupActive': this.props.currentGroup === child.group,
      });
      return (
        React.createElement("div", {className: classes, key: index},
          React.createElement("h3", null, "目录"),
          React.createElement("ul", null,
            child.items.map(this.renderNavItems)
          )
        )
      );
    },
    renderNavItems: function(child, index) {
      var itemClasses = React.addons.classSet({
        'navListItem': true,
        'navListItemActive': this.props.currentDoc === child.title,
        'navListItemAppendix': child.type === 'appendix',
      });
      var classes = React.addons.classSet({
        'navItem': true,
        'navItemActive': this.props.currentDoc === child.title,
      });
      return (
        React.createElement("li", {className: itemClasses, key: index}, React.createElement("a", {className: classes, href: child.url},  child.partlabel +': '+ child.title))
      );
    },
  });

  function docNavRender(docnavData) {
    React.render(
      React.createElement(DocNav, {data: docnavData}),
      document.getElementById('doc_nav')
    );
  }
  docNavRender(docnavData);
</script>

  </div>
</div>


      <div class="footerContainer">
  <div id="footer_wrap" class="wrapper footerWrapper">
    <div class="footerBlocks">
      <div id="fb_oss" class="footerSection fbOpenSourceFooter">
          <svg class="facebookOSSLogoSvg" viewBox="0 0 1133.9 1133.9" x="0px" y="0px">
            <g>
              <path class="logoRing outerRing" d="M 498.3 3.7 c 153.6 88.9 307.3 177.7 461.1 266.2 c 7.6 4.4 10.3 9.1 10.3 17.8 c -0.3 179.1 -0.2 358.3 0 537.4 c 0 8.1 -2.4 12.8 -9.7 17.1 c -154.5 88.9 -308.8 178.1 -462.9 267.5 c -9 5.2 -15.5 5.3 -24.6 0.1 c -153.9 -89.2 -307.9 -178 -462.1 -266.8 C 3 838.8 0 833.9 0 825.1 c 0.3 -179.1 0.2 -358.3 0 -537.4 c 0 -8.6 2.6 -13.6 10.2 -18 C 164.4 180.9 318.4 92 472.4 3 C 477 -1.5 494.3 -0.7 498.3 3.7 Z M 48.8 555.3 c 0 79.9 0.2 159.9 -0.2 239.8 c -0.1 10 3 15.6 11.7 20.6 c 137.2 78.8 274.2 157.8 411 237.3 c 9.9 5.7 17 5.7 26.8 0.1 c 137.5 -79.8 275.2 -159.2 412.9 -238.5 c 7.4 -4.3 10.5 -8.9 10.5 -17.8 c -0.3 -160.2 -0.3 -320.5 0 -480.7 c 0 -8.8 -2.8 -13.6 -10.3 -18 C 772.1 218 633.1 137.8 494.2 57.4 c -6.5 -3.8 -11.5 -4.5 -18.5 -0.5 C 336.8 137.4 197.9 217.7 58.8 297.7 c -7.7 4.4 -10.2 9.2 -10.2 17.9 C 48.9 395.5 48.8 475.4 48.8 555.3 Z" />
              <path class="logoRing middleRing" d="M 184.4 555.9 c 0 -33.3 -1 -66.7 0.3 -100 c 1.9 -48 24.1 -86 64.7 -110.9 c 54.8 -33.6 110.7 -65.5 167 -96.6 c 45.7 -25.2 92.9 -24.7 138.6 1 c 54.4 30.6 108.7 61.5 162.2 93.7 c 44 26.5 67.3 66.8 68 118.4 c 0.9 63.2 0.9 126.5 0 189.7 c -0.7 50.6 -23.4 90.7 -66.6 116.9 c -55 33.4 -110.8 65.4 -167.1 96.5 c -43.4 24 -89 24.2 -132.3 0.5 c -57.5 -31.3 -114.2 -64 -170 -98.3 c -41 -25.1 -62.9 -63.7 -64.5 -112.2 C 183.5 621.9 184.3 588.9 184.4 555.9 Z M 232.9 556.3 c 0 29.5 0.5 59.1 -0.1 88.6 c -0.8 39.2 16.9 67.1 50.2 86.2 c 51.2 29.4 102.2 59.2 153.4 88.4 c 31.4 17.9 63.6 18.3 95 0.6 c 53.7 -30.3 107.1 -61.2 160.3 -92.5 c 29.7 -17.5 45 -44.5 45.3 -78.8 c 0.6 -61.7 0.5 -123.5 0 -185.2 c -0.3 -34.4 -15.3 -61.5 -44.9 -79 C 637.7 352.6 583 320.8 527.9 290 c -27.5 -15.4 -57.2 -16.1 -84.7 -0.7 c -56.9 31.6 -113.4 64 -169.1 97.6 c -26.4 15.9 -40.7 41.3 -41.1 72.9 C 232.6 491.9 232.9 524.1 232.9 556.3 Z" />
              <path class="logoRing innerRing" d="M 484.9 424.4 c 69.8 -2.8 133.2 57.8 132.6 132 C 617 630 558.5 688.7 484.9 689.1 c -75.1 0.4 -132.6 -63.6 -132.7 -132.7 C 352.1 485 413.4 421.5 484.9 424.4 Z M 401.3 556.7 c -3.4 37.2 30.5 83.6 83 84.1 c 46.6 0.4 84.8 -37.6 84.9 -84 c 0.1 -46.6 -37.2 -84.4 -84.2 -84.6 C 432.2 472.1 397.9 518.3 401.3 556.7 Z" />
            </g>
          </svg>
        <h2><a class="footerLink" href="https://code.facebook.com/projects/" target="_blank">Facebook Open Source</a></h2>
      </div>
      <div class="footerSection rightAlign">
        <a class="footerLink" href="https://github.com/liaohuqiu/f8-app-tutorial-cn" target="_blank">本文档 GitHub 项目</a>
      </div>
    </div>
  </div>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-43024238-14', 'auto');
  ga('send', 'pageview');

</script>


    </div>
  </body>

</html>
